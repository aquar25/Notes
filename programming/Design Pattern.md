### 状态模式

#### 定义

状态1---事件1/操作1---状态2

状态1情况下，如果触发了事件1,则状态转移到状态2,然后执行操作1

在分析状态模式时，要先把所有的状态、事件、操作都分析出来，通过状态转换表将状态对各种事件的响应列举出来，避免遗漏。

状态模式可以让一个对象根据自身内部的状态执行不同的操作

状态的转移可以在上下文类中控制也可以在状态内部触发

#### 实现

1. 定义状态接口，接口中定义了所有状态需要响应的事件
2. 定义所有的状态子类，子类中实现事件响应接口
3. 定义一个状态上下文管理类，其中有所有状态的实例，它用来处理状态的转移，上下文管理类将自己的引用传递给各个状态子类
4. 在每个状态子类的事件处理函数中执行需要的操作，以及可能需要调用上下文管理对象接口来转移状态，这样可以避免状态之间相互依赖
5. 定义一个操作接口，用来定义可能的操作行为

状态机的上下文类接收外部的事件，调用相应的事件函数，事件函数再调用状态的事件函数，从而实现当前状态的切换和操作的执行

* 尽量不要在状态中定义任何数据，这样状态可以在多个不同的上下文中复用，只需要把Context类中的状态实例定义为静态的即可